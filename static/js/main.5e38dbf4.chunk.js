(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{97:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(24),s=n.n(r),a=n(10),o=n(17),u=n.n(o),i=n(20),l=n(25),j=n.n(l),m=n(48),b=Object(m.a)("ws://kirill-chat-app.herokuapp.com",{transports:["websocket"]}),_=n(1),d=function(){var e=Object(a.c)((function(e){return e.idRoom})),t=Object(a.c)((function(e){return e.userName})),n=Object(a.b)(),r=function(){var e=Object(i.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!c){e.next=8;break}return e.next=4,j.a.post("https://kirill-chat-app.herokuapp.com/rooms",{idRoom:t,userName:c});case 4:return b.emit("ROOM:JOIN",{idRoom:t,userName:c}),b.on("ROOM:JOINED",(function(e){return n({type:"SET_USERS",payload:e})})),n({type:"IS_AUTH",payload:!0}),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){console.log(b)}),[]),Object(_.jsxs)("div",{className:"join-block",children:[Object(_.jsx)("input",{type:"text",value:e,onChange:function(e){return n({type:"SET_IDROOM",payload:e.target.value})},placeholder:"Room ID"}),Object(_.jsx)("input",{type:"text",value:t,onChange:function(e){return n({type:"SET_USERNAME",payload:e.target.value})},placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f"}),Object(_.jsx)("button",{onClick:function(){return r(e,t)},children:"\u0432\u043e\u0439\u0442\u0438"})]})},p=n(30),O=n(47),h=function(){var e=Object(a.c)((function(e){return e.idRoom})),t=Object(a.c)((function(e){return e.userName})),n=Object(a.c)((function(e){return e.users})),r=Object(c.useState)(""),s=Object(p.a)(r,2),o=s[0],l=s[1],m=Object(c.useState)([]),d=Object(p.a)(m,2),h=d[0],f=d[1],x=function(){var n=Object(i.a)(u.a.mark((function n(c){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:b.emit("SEND:MESSAGE",{message:c,idRoom:e,userName:t}),l(c=""),b.on("GET:MESSAGE",(function(e){return f(e)}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(c.useEffect)(Object(i.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get("https://kirill-chat-app.herokuapp.com/rooms/".concat(e)).then((function(e){return f(e.data.messages)}));case 2:b.on("GET:MESSAGE",(function(e){return f(e)}));case 3:case"end":return t.stop()}}),t)}))),[]),Object(_.jsx)("div",{className:"room",children:Object(_.jsx)("div",{className:"room__conteiner",children:Object(_.jsxs)("div",{className:"room__content",children:[Object(_.jsxs)("div",{className:"room__users__connect",children:[Object(_.jsxs)("div",{className:"room__users__room-number",children:["\u041a\u043e\u043c\u043d\u0430\u0442\u0430: ",e]}),Object(_.jsxs)("div",{className:"room__users__number",children:["\u041e\u043d\u043b\u0430\u0439\u043d: (",n?n.length:null,")"]}),n?n.map((function(e){return Object(_.jsx)("ul",{className:"room__users__list",children:Object(_.jsx)("li",{className:"room__user__link",children:e})})})):null]}),Object(_.jsxs)("div",{className:"room__massanges",children:[Object(_.jsx)("ul",{className:"room__massanges__list",children:Object(_.jsx)(O.Scrollbars,{style:{width:500,height:255},children:h?h.map((function(e){return Object(_.jsxs)("div",{className:"room__massanges__link",children:[Object(_.jsx)("div",{className:"room__massanges__link__message",children:e.message}),Object(_.jsx)("span",{className:"room__massanges__link__user-name",children:e.userName})]})})):null})}),Object(_.jsxs)("div",{className:"room__send__massenge",children:[Object(_.jsx)("textarea",{className:"room__send__input",value:o,onChange:function(e){return l(e.target.value)}}),Object(_.jsx)("div",{className:"room__send__button ",onClick:function(){return x(o)},children:Object(_.jsx)("span",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})]})]})})})},f=(n(97),function(){var e=Object(a.c)((function(e){return e.isAuth}));return Object(_.jsx)("div",{className:"app",children:e?Object(_.jsx)(h,{}):Object(_.jsx)(d,{})})}),x=n(16),v=n(49),N={isAuth:!1,idRoom:null,userName:"",users:null},E=Object(v.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_AUTH":return Object(x.a)(Object(x.a)({},e),{},{isAuth:t.payload});case"SET_IDROOM":return Object(x.a)(Object(x.a)({},e),{},{idRoom:t.payload});case"SET_USERNAME":return Object(x.a)(Object(x.a)({},e),{},{userName:t.payload});case"SET_USERS":return Object(x.a)(Object(x.a)({},e),{},{users:t.payload});default:return e}})),g=E;s.a.render(Object(_.jsx)(a.a,{store:g,children:Object(_.jsx)(f,{})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.5e38dbf4.chunk.js.map